<!doctype html>
<html>  
<head>
	<link rel="stylesheet" href="css/styles.css"/>
	<script src="js/jquery.min.js"></script>
	<script src="js/socket.js"></script>
 	<script src="/socket.io/socket.io.js"></script>
</head> 
 <body>    
 	<h1>ChatApp</h1> 
 	<ul id = 'log'></ul>
 	<form id="form" type = "form">
 		<input id = "message" class = "text" type = "text" placeholder= "Insert message here">
 		<button id = "submit" class="submit">Send</button>
 	</form>
 	<script>
 		var name = prompt("Please enter a username");
 		
 		/* TO DO: CHECK FOR UNIQUE USERNAMES */
 		while(name == "" || name == "null"){
 			var name = prompt("Invalid username. Please try again");
 		}

 		var socket = io.connect('http://localhost:8000');
 		
 		socket.on("message", function(message){
			$("#log").append($('<br>'));
			if(message.includes(name)){
				$("#log").append($('<li class = "mine" >').html(message));
			}else{
				$("#log").append($('<li>').html(message));
			}
			$("#log").append($('<br>'));
		});

 		$("form").submit(function(e){
			e.preventDefault();
			socket.emit("chat message", "<b>" + name + ": </b>" + $("#message").val());
			$("#message").val("");
			return false;
		});

 	</script>
 </body>
 </html>